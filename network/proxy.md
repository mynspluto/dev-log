# 포워드 프록시
| 구분    | 설명                                 |
| ----- | ---------------------------------- |
| 위치    | 클라이언트와 서버 사이에 위치                   |
| 역할    | 클라이언트를 대신해 외부 서버에 요청을 전달           |
| 목적    | 내부 사용자의 IP 숨김, 접근 제한 우회, 캐싱 등      |
| 사용 사례 | 회사 내부에서 외부 인터넷 접속 시 트래픽 필터링, 차단 우회 |
| 동작 흐름 | 클라이언트 → 포워드 프록시 → 외부 서버            |

클라이언트가 직접 외부 서버에 접속하지 않고, 프록시 서버를 거쳐 요청과 응답을 주고받음
클라이언트가 내부망일 때 많이 쓰임

## Spring Boot 톰캣 내장임에도 Nginx 쓰는 이유
url에 따라 멀티도메인인 경우 분기 가능
어플리케이션 동작 포트와 상관 없이 접속 포트와 연결 가능
여러 프로그램이 실행 중인 경우 단일 진입점으로 https 적용 가능

### 톰캣은 WAS(어플리케이션 서버)일 뿐, 웹 서버는 아님
톰캣은 동적 처리에는 강하지만, 정적 파일 처리, 보안, SSL, 로드밸런싱에는 최적화되지 않음
웹 서버(Nginx, Apache)는 그에 특화된 기능(정적 파일, SSL offloading, 캐시 등)을 제공
톰캣이 HTML, JS, CSS를 직접 서빙해도 되지만 느리고 부적절

### HTTPS 설정 복잡, 비효율
Spring Boot + 톰캣에서도 HTTPS 적용은 가능하지만 운영환경에선 복잡
인증서 포맷(JSK or PKCS12)
인증서 갱신 자동화 어렵고 번거로움
Nginx는 certbot이나 acme.sh 등으로 Let's Encrypt 자동 갱신 가능, 설정 간단

### 로드 밸런싱과 무중단 배포
일부 인스턴스를 끊고 재시작하는 블루그린/롤링 배포 시에 Nginx가 훨씬 유리

### 보안 헤더, 리버스 프록시, IP 필터링
클라이언트 IP를 검증하거나, 리다이렉션, 인증 헤더 추가, CORS 처리 등은
Spring Boot보다 Nginx가 더 빠르고 간단하게 처리 가능

# Apache VS Nginx
Apache는 요청마다 프로세스 or 스레드로 분기
Nginx는 싱글 스레드 이벤트 비동기 논블로킹
대부분 웹은 io가 많아서 Nginx가 유리
CPU bound한 경우 Apache가 유리

# 리버스 프록시
| 구분    | 설명                            |
| ----- | ----------------------------- |
| 위치    | 서버와 클라이언트 사이에 위치              |
| 역할    | 클라이언트를 대신해 내부 서버(들)에 요청을 전달   |
| 목적    | 로드 밸런싱, SSL 종료, 보안 강화, 캐싱, 압축 |
| 사용 사례 | 웹 서비스 앞단에서 트래픽 분산, 보안 강화      |
| 동작 흐름 | 클라이언트 → 리버스 프록시 → 내부 서버       |

클라이언트는 리버스 프록시만 알고 있고, 리버스 프록시가 실제 여러 서버로 요청을 분배함
웹 서버 앞단에서 많이 쓰임