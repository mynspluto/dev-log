# Git 서브모듈(Submodule)과 서브트리(Subtree) 비교

레포지토리내에 다른 레포지토리를 clone하면 push했을 때 해당 내용이 레포지토리에 업데이트 되지 않음
따라서 submodule과 subtree 필요
Git에서 외부 저장소를 관리하는 두 가지 방법인 서브모듈과 서브트리의 차이점을 정리했습니다.


## 서브모듈(Submodule)

서브모듈은 메인 저장소 내에 다른 저장소를 참조로 포함시키는 방식입니다.

### 특징
- 메인 저장소는 서브모듈의 특정 커밋을 가리키는 참조만 저장
- 서브모듈 코드는 실제로 메인 저장소에 저장되지 않음
- 저장소를 클론할 때 별도의 단계로 서브모듈을 초기화하고 업데이트해야 함
- 서브모듈 디렉토리는 메인 저장소에서 별도의 Git 저장소로 작동

### 명령어
```bash
# 서브모듈 추가
git submodule add <저장소 URL> <경로>

# 서브모듈 초기화 및 업데이트
git submodule init
git submodule update

# 서브모듈 포함하여 클론
git clone --recurse-submodules <저장소 URL>
```

## 서브트리(Subtree)

서브트리는 외부 저장소의 코드를 메인 저장소에 직접 통합하는 방식입니다.

### 특징
- 외부 저장소의 모든 코드와 히스토리가 메인 저장소에 통합됨
- 서브트리 코드는 메인 저장소의 일부로 저장됨
- 추가 초기화 없이 저장소를 클론하면 모든 코드를 즉시 사용 가능
- 서브트리 디렉토리는 별도의 Git 저장소가 아님

### 명령어
```bash
# 서브트리 추가
git subtree add --prefix=<경로> <저장소 URL> <브랜치> --squash

# 서브트리 업데이트
git subtree pull --prefix=<경로> <저장소 URL> <브랜치> --squash

# 서브트리 변경사항 원본 저장소에 푸시
git subtree push --prefix=<경로> <저장소 URL> <브랜치>
```

## 주요 차이점

| 항목 | 서브모듈(Submodule) | 서브트리(Subtree) |
|------|-------------------|-----------------|
| **코드 저장 방식** | 참조만 저장, 실제 코드는 별도 관리 | 모든 코드를 메인 저장소에 통합 |
| **사용 복잡성** | 초기 설정과 사용이 복잡할 수 있음 | 사용이 더 간단하고 직관적임 |
| **의존성 관리** | 외부 저장소 변경 사항 추적에 더 적합 | 외부 코드를 프로젝트에 통합하는 데 더 적합 |
| **저장소 크기** | 메인 저장소 크기 증가 없음 | 메인 저장소 크기가 증가함 |
| **협업** | 다른 사람이 별도로 서브모듈 초기화 필요 | 추가 작업 없이 모든 코드 사용 가능 |
| **변경사항 관리** | 서브모듈 변경은 별도 저장소에서 관리 | 메인 저장소에서 모든 변경사항 관리 가능 |

## 언제 어떤 것을 사용할까?

### 서브모듈 사용이 좋은 경우
- 외부 라이브러리가 자주 업데이트되고, 그 변경사항을 명확하게 추적해야 할 때
- 외부 코드를 수정하지 않고 그대로 사용할 때
- 저장소 크기를 최소화해야 할 때
- 외부 저장소에 대한 쓰기 권한이 있고 양방향 동기화가 필요할 때

### 서브트리 사용이 좋은 경우
- 외부 코드를 프로젝트에 깊게 통합하고 싶을 때
- 외부 코드를 수정하고 변경사항을 프로젝트에 적용하고 싶을 때
- 팀원들이 추가 단계 없이 모든 코드에 접근할 수 있게 하고 싶을 때
- 외부 저장소의 특정 버전을 고정하여 사용하고 싶을 때